# Документация по Redux Toolkit в kidbee-drag-drop

## Описание
Проект **kidbee-drag-drop** является отдельной демонстрацией механики перетаскивания элементов с реализацией собственного хранилища данных на фронтенде. В **KidBee** данные передаются исключительно через пропсы, в **kidbee-drag-drop** реализованы примеры использования глобального хранилища с Redux Toolkit.

## Выгоды использования хранилищ перед передачей данных через пропсы
Передача данных через пропсы эффективна, но при разрастании приложения она может привести к сложностям:
- Проблема "prop drilling" – необходимость передавать пропсы через несколько уровней компонентов.
- Отсутствие глобального состояния – каждый компонент управляет своими данными, что затрудняет взаимодействие между ними.
- Отсутствие удобного механизма подписки на изменения данных в нескольких компонентах одновременно.

Использование глобального хранилища решает эти проблемы:
- Упрощает управление состоянием.
- Позволяет легко подписывать компоненты на изменения.
- Исключает необходимость пробрасывать данные через множество промежуточных компонентов.

## Выбор инструмента управления состоянием
Среди возможных решений были рассмотрены:
- **useContext + useReducer** – удобный для небольших приложений, но не масштабируемый и требует дополнительной логики для кеширования.
- **Zustand** – легковесное решение, но ограничено в возможностях.
- **Redux** – мощное решение, но требует написания большего количества кода.
- **Redux Toolkit** – надстройка над Redux, упрощающая работу с ним и уменьшающая шаблонный код.

Выбран **Redux Toolkit**, так как он:
- Автоматизирует создание хранилища и редьюсеров.
- Позволяет использовать **immer** для удобной работы с неизменяемыми данными.
- Включает удобные инструменты для асинхронных операций (createAsyncThunk).

## Демонстрация работы Redux Toolkit в kidbee-drag-drop
### 1. Оперативная запись уведомлений
На примере уведомлений "Верно / Неверно" в **DragDrop** реализовано:
- Запись в хранилище при успешном/неудачном перетаскивании.
- Автоматическое удаление уведомления через заданное время.
- Мгновенное отображение уведомлений в браузере.

### 2. Долговременное хранение количества сыгранных игр
На примере **NotificationWrapper** реализовано:
- Хранение количества сыгранных игр в Redux.
- Инкрементирование значения при загрузке страницы.
- Возможность вызова уведомления с количеством игр из любого компонента.

## Структура файлов Redux Toolkit в kidbee-drag-drop
1. **store/store.ts** – инициализация хранилища.
2. **reducers/notificationReducer.ts** – управление уведомлениями.
3. **reducers/gameStatsReducer.ts** – хранение количества сыгранных игр.
4. **components/NotificationWrapper.tsx** – подписка на изменение количества игр.
5. **components/Game/DragDrop.tsx** – диспетчеризация событий для отображения уведомлений.

### Как это работает
- При успешном/неудачном перетаскивании отправляется `dispatch(showNotification(...))`, который изменяет состояние уведомлений.
- `NotificationWrapper` подписывается на изменения в `gameStats` и вызывает уведомление о количестве игр.
- `store.ts` объединяет редьюсеры и предоставляет `dispatch` и `useSelector` для работы с глобальным состоянием.

## Заключение
Проект **kidbee-drag-drop** демонстрирует:
- Гибкость глобального состояния перед передачей пропсов.
- Использование Redux Toolkit для управления уведомлениями и статистикой.
- Простоту интеграции глобального состояния в Next.js без потери преимуществ серверного рендеринга.

Данный подход можно масштабировать и применять в других частях проекта KidBee при необходимости.

